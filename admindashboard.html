<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Admin Dashboard â€“ Manage Alumni</title>

<style>
:root {
  --primary: #4f46e5;
  --primary-dark: #4338ca;
  --danger: #dc2626;
  --bg: #f4f6fb;
  --panel: #ffffff;
  --text: #111827;
  --muted: #6b7280;
  --border: #e5e7eb;
  --radius: 12px;
}

* { box-sizing: border-box; }

body {
  margin: 0;
  font-family: "Poppins", Arial, sans-serif;
  background: var(--bg);
  color: var(--text);
}

/* ---------- HEADER ---------- */
header {
  background: linear-gradient(90deg, var(--primary), var(--primary-dark));
  color: white;
  padding: 18px 24px;
  font-size: 1.2rem;
  font-weight: 600;
  box-shadow: 0 4px 14px rgba(0,0,0,.15);
}

/* ---------- BUTTONS ---------- */
button {
  padding: 8px 14px;
  border-radius: 8px;
  border: none;
  font-weight: 600;
  cursor: pointer;
  transition: transform .15s, box-shadow .15s;
}

button:hover {
  transform: translateY(-1px);
  box-shadow: 0 6px 16px rgba(0,0,0,.15);
}

button:active {
  transform: translateY(0);
}

.add-btn {
  background: var(--primary);
  color: white;
  margin: 20px 24px;
}

.edit-btn {
  background: #f59e0b;
  color: white;
}

.delete-btn {
  background: var(--danger);
  color: white;
}

/* ---------- TABLE ---------- */
table {
  width: calc(100% - 48px);
  margin: 0 24px 40px;
  background: var(--panel);
  border-collapse: separate;
  border-spacing: 0;
  border-radius: var(--radius);
  overflow: hidden;
  box-shadow: 0 10px 30px rgba(0,0,0,.08);
}

thead {
  background: #eef2ff;
}

th {
  text-align: left;
  padding: 14px;
  font-size: .9rem;
  color: var(--muted);
}

td {
  padding: 14px;
  border-top: 1px solid var(--border);
  font-size: .95rem;
}

tbody tr:hover {
  background: #f9fafb;
}

.actions button {
  margin-right: 6px;
}

/* ---------- MODAL ---------- */
#modal {
  display: none;
  position: fixed;
  inset: 0;
  background: rgba(17,24,39,.55);
  justify-content: center;
  align-items: center;
  z-index: 1000;
}

.modal-box {
  background: var(--panel);
  padding: 24px;
  width: 420px;
  border-radius: 16px;
  box-shadow: 0 25px 60px rgba(0,0,0,.25);
}

.modal-box h3 {
  margin-top: 0;
  margin-bottom: 16px;
  color: var(--primary);
}

/* ---------- FORM ---------- */
input, textarea {
  width: 100%;
  padding: 10px 12px;
  margin-bottom: 12px;
  border-radius: 8px;
  border: 1px solid var(--border);
  font-size: .9rem;
  outline: none;
}

input:focus, textarea:focus {
  border-color: var(--primary);
  box-shadow: 0 0 0 2px rgba(79,70,229,.2);
}

textarea {
  resize: vertical;
  min-height: 80px;
}

.form-actions {
  display: flex;
  gap: 10px;
  margin-top: 10px;
}

.save-btn {
  background: var(--primary);
  color: white;
  flex: 1;
}

.cancel-btn {
  background: #e5e7eb;
  color: #111;
  flex: 1;
}
</style>
</head>

<body>

<header>Admin Dashboard â€“ Manage Alumni</header>

<button class="add-btn" onclick="openAdd()">+ Add Alumni</button>

<table>
<thead>
<tr>
<th>Name</th>
<th>Company</th>
<th>Designation</th>
<th>Actions</th>
</tr>
</thead>
<tbody id="alumniTableBody"></tbody>
</table>

<!-- MODAL -->
<div id="modal">
  <div class="modal-box">
    <h3 id="modalTitle">Edit Alumni</h3>
    <form id="alumniForm">
      <input name="name" placeholder="Name" />
      <input name="company" placeholder="Company" />
      <input name="designation" placeholder="Designation" />
      <input name="email" placeholder="Email" />
      <input name="batch" placeholder="Batch" />
      <input name="branch" placeholder="Branch" />
      <input name="linkedin" placeholder="LinkedIn" />
      <input name="photourl" placeholder="Photo URL" />
      <textarea name="about" placeholder="About"></textarea>

      <div class="form-actions">
        <button class="save-btn" type="submit">Save</button>
        <button class="cancel-btn" type="button" onclick="closeModal()">Cancel</button>
      </div>
    </form>
  </div>
</div>

<!-- ðŸ”’ FIREBASE LOGIC (UNCHANGED) -->
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
import {
  getFirestore,
  collection,
  getDocs,
  getDoc,
  doc,
  addDoc,
  updateDoc,
  deleteDoc
} from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSyBSa1065ebQotb2Gy2YyMCO-7DVl6E7XzE",
  authDomain: "fwd-a5a74.firebaseapp.com",
  projectId: "fwd-a5a74"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

const tbody = document.getElementById("alumniTableBody");
const modal = document.getElementById("modal");
const form = document.getElementById("alumniForm");
const modalTitle = document.getElementById("modalTitle");

let editId = null;

async function loadAlumni() {
  tbody.innerHTML = "";
  const snapshot = await getDocs(collection(db, "alumni"));
  snapshot.forEach(docSnap => {
    const a = docSnap.data();
    const tr = document.createElement("tr");
    tr.innerHTML = `
      <td>${a.name || ""}</td>
      <td>${a.company || ""}</td>
      <td>${a.designation || ""}</td>
      <td class="actions">
        <button class="edit-btn" onclick="editAlumni('${docSnap.id}')">Edit</button>
        <button class="delete-btn" onclick="deleteAlumni('${docSnap.id}')">Delete</button>
      </td>
    `;
    tbody.appendChild(tr);
  });
}
loadAlumni();

window.openAdd = () => {
  editId = null;
  modalTitle.innerText = "Add Alumni";
  form.reset();
  modal.style.display = "flex";
};

window.editAlumni = async (id) => {
  editId = id;
  modalTitle.innerText = "Edit Alumni";
  const snap = await getDoc(doc(db, "alumni", id));
  if (!snap.exists()) return;
  const a = snap.data();
  form.name.value = a.name || "";
  form.company.value = a.company || "";
  form.designation.value = a.designation || "";
  form.email.value = a.email || "";
  form.batch.value = a.batch || "";
  form.branch.value = a.branch || "";
  form.linkedin.value = a.linkedin || "";
  form.photourl.value = a.photourl || "";
  form.about.value = a.about || "";
  modal.style.display = "flex";
};

form.addEventListener("submit", async (e) => {
  e.preventDefault();
  const data = {
    name: form.name.value,
    company: form.company.value,
    designation: form.designation.value,
    email: form.email.value,
    batch: form.batch.value,
    branch: form.branch.value,
    linkedin: form.linkedin.value,
    photourl: form.photourl.value,
    about: form.about.value
  };
  if (editId) {
    await updateDoc(doc(db, "alumni", editId), data);
  } else {
    await addDoc(collection(db, "alumni"), data);
  }
  modal.style.display = "none";
  editId = null;
  form.reset();
  loadAlumni();
});

window.deleteAlumni = async (id) => {
  if (confirm("Delete this alumni?")) {
    await deleteDoc(doc(db, "alumni", id));
    loadAlumni();
  }
};

window.closeModal = () => modal.style.display = "none";
</script>

</body>
</html>
