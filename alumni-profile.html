<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Alumni Profile</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body {
  font-family: Arial, sans-serif;
  background: #f5f7fb;
  margin: 0;
}
header {
  padding: 15px 30px;
  background: white;
  display: flex;
  justify-content: space-between;
  align-items: center;
}
main {
  max-width: 800px;
  margin: auto;
  padding: 30px;
}
.card {
  background: white;
  padding: 30px;
  border-radius: 12px;
  box-shadow: 0 6px 20px rgba(0,0,0,.08);
}
h2 { margin-top: 0; }
p { color: #555; margin: 6px 0; }
a { color: #2563eb; text-decoration: none; }
</style>
</head>

<body>

<header>
  <strong>Alumni Profile</strong>
  <a href="alumni.html">‚Üê Back</a>
</header>

<main>
  <div class="card" id="profile"></div>
</main>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
import { getFirestore, doc, getDoc } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSyBSa1065ebQotb2Gy2YyMCO-7DVl6E7XzE",
  authDomain: "fwd-a5a74.firebaseapp.com",
  projectId: "fwd-a5a74",
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

const id = new URLSearchParams(window.location.search).get("id");
const profile = document.getElementById("profile");

// üîπ SMART CACHE PER PROFILE
async function loadProfile() {
  const cacheKey = `alumni_${id}`;
  const cached = sessionStorage.getItem(cacheKey);

  if (cached) {
    render(JSON.parse(cached));
    return;
  }

  const snap = await getDoc(doc(db, "alumni", id));
  const data = snap.data();

  sessionStorage.setItem(cacheKey, JSON.stringify(data));
  render(data);
}

function render(a) {
  profile.innerHTML = `
    <h2>${a.name || ""}</h2>
    <p><strong>Company:</strong> ${a.company || ""}</p>
    <p><strong>Designation:</strong> ${a.designation || ""}</p>
    <p><strong>Email:</strong> ${a.email || ""}</p>
    <p><strong>Batch:</strong> ${a.batch || ""}</p>
    <p><strong>Branch:</strong> ${a.branch || ""}</p>
    ${a.linkedin ? `<p><a href="${a.linkedin}" target="_blank">LinkedIn Profile</a></p>` : ""}
    ${a.about ? `<p><strong>About:</strong><br>${a.about}</p>` : ""}
  `;
}

loadProfile();
</script>

</body>
</html>
