<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Alumni Directory | Alumni Connect</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0" />

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">

<style>
* { box-sizing: border-box; }

:root{
  --bg:#f4f6fb;
  --panel:#ffffff;
  --primary:#1e1b4b;
  --accent:#6366f1;
  --accent-2:#4f46e5;
  --muted:#6b7280;
  --shadow:0 20px 40px rgba(17,24,39,.08);
}

body {
  margin: 0;
  font-family: 'Poppins', sans-serif;
  background:
    radial-gradient(1200px 400px at top, #eef2ff, transparent 60%),
    var(--bg);
  color: var(--primary);
}

/* ---------- HEADER ---------- */
header {
  background: rgba(255,255,255,.9);
  backdrop-filter: blur(10px);
  padding: 14px 30px;
  display: flex;
  justify-content: space-between;
  align-items: center;
  box-shadow: 0 6px 20px rgba(0,0,0,.06);
  position: sticky;
  top: 0;
  z-index: 100;
}
header .logo {
  font-weight: 700;
  font-size: 1.1rem;
}
header .nav a {
  margin-left: 12px;
  padding: 8px 16px;
  border-radius: 10px;
  text-decoration: none;
  font-weight: 600;
  transition: all .2s;
}
.nav .dashboard {
  color: var(--primary);
  border:1px solid #e5e7eb;
  background:#fff;
}
.nav .dashboard:hover { background:#f8fafc; }
.nav .home {
  background:linear-gradient(135deg,var(--accent),var(--accent-2));
  color:#fff;
}

/* ---------- HERO ---------- */
.hero {
  margin: 30px;
  background:
    linear-gradient(135deg, rgba(99,102,241,.12), rgba(79,70,229,.08)),
    #fff;
  border-radius: 22px;
  padding: 32px;
  display: flex;
  justify-content: space-between;
  align-items: center;
  box-shadow: var(--shadow);
}
.hero h1 { margin: 0; font-size:1.9rem; }
.hero p { margin: 6px 0 0; color:var(--muted); }
.count {
  font-weight: 700;
  font-size:1.1rem;
  color: var(--accent-2);
}

/* ---------- FILTERS ---------- */
.filters {
  margin: 0 30px 20px;
  display: flex;
  gap: 12px;
  flex-wrap: wrap;
}
.filters input {
  padding: 12px 16px;
  border-radius: 12px;
  border: 1px solid #e5e7eb;
  font-size: .95rem;
  min-width: 260px;
  outline: none;
}
.filters input:focus {
  border-color: var(--accent);
  box-shadow: 0 0 0 3px rgba(99,102,241,.15);
}

/* ---------- GRID ---------- */
.grid {
  padding: 0 30px 40px;
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(260px,1fr));
  gap: 24px;
}

.card {
  background: linear-gradient(180deg,#ffffff,#fafbff);
  border-radius: 18px;
  padding: 24px;
  box-shadow: var(--shadow);
  cursor: pointer;
  transition: transform .25s ease, box-shadow .25s ease;
  position: relative;
  overflow: hidden;
}
.card::before{
  content:"";
  position:absolute;
  inset:0;
  background:linear-gradient(120deg,transparent,rgba(99,102,241,.12),transparent);
  opacity:0;
  transition:.3s;
}
.card:hover::before{ opacity:1; }
.card:hover {
  transform: translateY(-8px);
  box-shadow: 0 30px 60px rgba(17,24,39,.12);
}

.card h3 { margin: 0 0 6px; font-size:1.1rem; }
.card p { margin: 2px 0; color:var(--muted); }

.badge {
  display:inline-block;
  margin-top:12px;
  padding:6px 14px;
  background:linear-gradient(135deg,#eef2ff,#e0e7ff);
  color:#3730a3;
  border-radius:999px;
  font-size:.85rem;
  font-weight:600;
}

/* ---------- LOADER ---------- */
#loader {
  position: fixed;
  inset: 0;
  background: rgba(255,255,255,.9);
  backdrop-filter: blur(6px);
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 999;
}
.spinner {
  width: 54px;
  height: 54px;
  border: 5px solid #e5e7eb;
  border-top: 5px solid var(--accent);
  border-radius: 50%;
  animation: spin 1s linear infinite;
}
@keyframes spin { to { transform: rotate(360deg); } }

/* ---------- FOOTER ---------- */
footer {
  text-align: center;
  padding: 22px;
  color: var(--muted);
  font-size:.9rem;
}
</style>
</head>

<body>

<!-- LOADER -->
<div id="loader"><div class="spinner"></div></div>

<header>
  <div class="logo">üéì Alumni Connect</div>
  <div class="nav">
    <a class="dashboard" href="dashboard.html">‚Üê Dashboard</a>
    <a class="home" href="dashboard.html">Home</a>
  </div>
</header>

<section class="hero">
  <div>
    <h1>Alumni Directory</h1>
    <p>Browse alumni by batch, company or role.</p>
  </div>
  <div class="count"><span id="count">0</span> found</div>
</section>

<section class="filters">
  <input id="search" placeholder="Search name, company, role..." />
</section>

<section class="grid" id="grid"></section>

<footer>¬© 2025 Alumni Connect</footer>

<!-- üîí LOGIC UNCHANGED -->
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
import { getFirestore, collection, getDocs } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSyBSa1065ebQotb2Gy2YyMCO-7DVl6E7XzE",
  authDomain: "fwd-a5a74.firebaseapp.com",
  projectId: "fwd-a5a74"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

const grid = document.getElementById("grid");
const search = document.getElementById("search");
const countEl = document.getElementById("count");
const loader = document.getElementById("loader");

let alumni = [];

const cache = localStorage.getItem("alumniCache");
if (cache) {
  alumni = JSON.parse(cache);
  render(alumni);
  loader.style.display = "none";
} else {
  loadFromFirestore();
}

async function loadFromFirestore() {
  const snap = await getDocs(collection(db, "alumni"));
  alumni = snap.docs.map(d => ({ id: d.id, ...d.data() }));
  localStorage.setItem("alumniCache", JSON.stringify(alumni));
  render(alumni);
  loader.style.display = "none";
}

function render(list) {
  grid.innerHTML = "";
  countEl.textContent = list.length;

  list.forEach(a => {
    const card = document.createElement("div");
    card.className = "card";
    card.innerHTML = `
      <h3>${a.name || ""}</h3>
      <p>${a.designation || ""} ‚Äî ${a.company || ""}</p>
      ${a.batch ? `<span class="badge">${a.batch}</span>` : ""}
    `;
    card.onclick = () => {
      window.location.href = `alumni-profile.html?id=${a.id}`;
    };
    grid.appendChild(card);
  });
}

search.addEventListener("input", e => {
  const q = e.target.value.toLowerCase();
  render(alumni.filter(a =>
    (a.name||"").toLowerCase().includes(q) ||
    (a.company||"").toLowerCase().includes(q) ||
    (a.designation||"").toLowerCase().includes(q)
  ));
});
</script>

</body>
</html>
